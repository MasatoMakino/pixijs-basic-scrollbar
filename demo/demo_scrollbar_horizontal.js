(()=>{"use strict";var t,e,i,s={4233(t,e,i){var s=i(1252);class n{constructor(t){this.rate=t}}class o extends s.mcf{get rate(){return this._rate}constructor(t){super(),this.isHorizontal=!0,this.wheelSpeed=3e-4,this.dragStartPos=new s.bRX,this.activePointerId=null,this.sliderEventEmitter=new s.bkB,this.startMove=t=>{this.onPressedSliderButton(t)},this.moveSlider=(t,e=!1)=>{(e||null!==this.activePointerId&&t.pointerId===this.activePointerId)&&this.onMoveSlider(t)},this.moveSliderFinish=t=>{null!=t?.pointerId&&t.pointerId!==this.activePointerId||(this.activePointerId=null,g.removeEventListenerFromTarget(this.buttonRootContainer,"pointermove",this.moveSlider),this._slideButton.off("pointerup",this.moveSliderFinish),this._slideButton.off("pointerupoutside",this.moveSliderFinish),this.sliderEventEmitter.emit("slider_change_finished",new n(this.rate)))},this.onWheel=t=>{const e=g.clamp(this.rate+t.deltaY*this.wheelSpeed,o.MAX_RATE,0);this.changeRate(e)};const e=r.init(t);this.canvas=e.canvas,this._base=this.initBase(e.base),this._bar=this.initBarAndMask(e?.bar),this._barMask=this.initBarAndMask(e?.mask),this._bar&&this._barMask&&(this._bar.mask=this._barMask),this._slideButton=this.initSliderButton(e.button),this.buttonRootContainer=g.getRootContainer(this.canvas,this._slideButton),this._minPosition=e.minPosition,this._maxPosition=e.maxPosition,this.isHorizontal=e.isHorizontal,this._rate=e.rate,this.changeRate(this._rate)}changeRate(t){if(null!==this.activePointerId)return;this._rate=t;const e=this.convertRateToPixel(this._rate);this.updateParts(e),this.sliderEventEmitter.emit("slider_change",new n(this.rate))}onPressedSliderButton(t){if(null!==this.activePointerId)return;this.activePointerId=t.pointerId;const e=t.currentTarget,i=this.toLocal(t.global);this.dragStartPos.set(i.x-e.x,i.y-e.y),g.addEventListenerToTarget(this.buttonRootContainer,"pointermove",this.moveSlider),this._slideButton.on("pointerup",this.moveSliderFinish),this._slideButton.on("pointerupoutside",this.moveSliderFinish)}onMoveSlider(t){const e=this.limitSliderButtonPosition(t);this.updateParts(e),this._rate=this.convertPixelToRate(e),this.sliderEventEmitter.emit("slider_change",new n(this.rate))}limitSliderButtonPosition(t){const e=g.getPointerLocalPosition(this,this.isHorizontal,this.dragStartPos,t);return g.clamp(e,this._maxPosition,this._minPosition)}updateParts(t){const e=e=>{g.setSize(e,this.isHorizontal,t-g.getPosition(e,this.isHorizontal))};this._bar&&!this._barMask&&e(this._bar),this._barMask&&e(this._barMask),g.setPosition(this._slideButton,this.isHorizontal,t)}onPressBase(t){null===this.activePointerId&&(this.dragStartPos.set(0,0),this.moveSlider(t,!0),this.sliderEventEmitter.emit("slider_change_finished",new n(this.rate)))}convertRateToPixel(t){return g.convertRateToPixel(t,this._maxPosition,this._minPosition)}convertPixelToRate(t){return g.convertPixelToRate(t,this._maxPosition,this._minPosition)}initBase(t){return t.eventMode="static",t.on("pointertap",t=>{this.onPressBase(t)}),t.on("wheel",this.onWheel),g.addChildParts(this,t),t}initBarAndMask(t){if(null!=t)return t.eventMode="none",g.addChildParts(this,t),t}initSliderButton(t){return t.on("pointerdown",this.startMove),t.on("wheel",this.onWheel),t.eventMode="static",g.addChildParts(this,t),t}dispose(){this.onDisposeFunction()}onDisposeFunction(){this.removeAllListeners(),this._base.removeAllListeners(),this._slideButton.removeAllListeners(),this.removeChildren()}}o.MAX_RATE=1;class r{static init(t){return this.check(t),null!=t.rate&&(t.rate=Math.max(0,t.rate),t.rate=Math.min(o.MAX_RATE,t.rate)),t.rate??=0,t.minPosition??=0,t.isHorizontal??=!0,t}static check(t){this.checkParts(t.base,"base"),this.checkParts(t.button,"button"),this.checkParts(t.mask,"mask"),this.checkParts(t.bar,"bar")}static checkParts(t,e){if(null==t)return;const i=g.getContentsBounds(t);if(0===i.width&&0===i.height)throw new Error(`SliderView : ${e} 初期化オプションで指定されたDisplayObjectにバウンディングボックスが存在しません。Containerを利用する場合はhitAreaを利用してバウンディングボックスを手動で設定してください。`);t.parent&&console.warn("初期化オプションで指定されたパーツがすでに別の親にaddChildされています。SliderViewおよびScrollBarViewの構成パーツは同一のコンテナにaddChildされることを前提としています。")}}var a=i(40);class l extends s.bkB{get speed(){return this._speed}constructor(t){super(),this.decelerationRate=.975,this.overflowScrollRange=180,this._speed=0,this.activePointerId=null,this._isStart=!1,this.onMouseDown=t=>{null===this.activePointerId&&(this.activePointerId=t.pointerId,this.updateDragPos(t),this._speed=0,this.tween&&this.disposeTween(),this.addDragListener())},this.onMouseMove=t=>{if(null===this.activePointerId||t.pointerId!==this.activePointerId)return;if(null==this.dragPos)return;this.stopChildrenInteractive();const e=this.getDragPos(t)-this.dragPos;this._speed=e,this.addTargetPosition(e*this.getOverflowDeceleration()),this.updateDragPos(t)},this.onMouseUp=t=>{t&&t.pointerId!==this.activePointerId||(this.removeDragListener(),this.activePointerId=null,this.onTick(),0!==this._speed||this.tween||this.resumeChildrenInteractive())},this.onTick=()=>{if(this.tween?.update(),null!==this.activePointerId)return;if(0===this._speed&&0===this.getLeaveRangeFromMask())return;if(this.tween?.isPlaying())return;const t=this.getOverflowDeceleration();if(this._speed*=this.decelerationRate*t,this.addTargetPosition(this._speed),Math.abs(this._speed)>.1)return;this._speed=0;const e=this.getClampedPos(),i={[this.scrollBarView.isHorizontal?"x":"y"]:e};this.disposeTween(),this.tween=new a.K(this.scrollBarView.contents.target).to(i,666).onUpdate(()=>{const t=g.getPosition(this.scrollBarView.contents.target,this.scrollBarView.isHorizontal);Math.abs(t-e)<1&&(this.stopInertial(),g.setPosition(this.scrollBarView.contents.target,this.scrollBarView.isHorizontal,e)),this.emit("update_target_position")}).onComplete(()=>{this.stopInertial()}).easing(a.GS.Cubic.Out).start()},this.stopInertial=()=>{this._speed=0,this.disposeTween(),this.resumeChildrenInteractive()},this.disposeTween=()=>{this.tween&&(this.tween.stop(),this.tween=void 0)},this.scrollBarView=t,t.scrollBarEventEmitter.on("stop_inertial_tween",this.stopInertial);const e=this.scrollBarView.contents.target;e.eventMode="static",this.defaultScrollTargetChildrenInteractive=e.interactiveChildren,this.start()}start(){this._isStart||(this._isStart=!0,this.scrollBarView.contents.target.on("pointerdown",this.onMouseDown),s.RvI.shared.add(this.onTick))}stop(){this._isStart&&(this._isStart=!1,this.scrollBarView.contents.target.off("pointerdown",this.onMouseDown),this.removeDragListener(),this.stopInertial(),s.RvI.shared.remove(this.onTick))}stopChildrenInteractive(){this.scrollBarView.contents.target.interactiveChildren=!1}resumeChildrenInteractive(){this.scrollBarView.contents.target.interactiveChildren=this.defaultScrollTargetChildrenInteractive}addDragListener(){this.switchDragListener(!0)}removeDragListener(){this.switchDragListener(!1)}switchDragListener(t){const e=this.scrollBarView.contents.target,i=this.scrollBarView.canvas??e,s=g.toggleEventListener;s(t,i,"pointermove",this.onMouseMove),s(t,e,"pointerup",this.onMouseUp),s(t,e,"pointerupoutside",this.onMouseUp)}getDragPos(t){return g.getPointerEventPosition(t,this.scrollBarView.isHorizontal)}updateDragPos(t){this.dragPos=this.getDragPos(t)}addTargetPosition(t){const e=this.scrollBarView.contents.target,i=this.scrollBarView.isHorizontal,s=g.getPosition(e,i);g.setPosition(e,i,s+t),this.emit("update_target_position")}getOverflowDeceleration(){const t=this.getLeaveRangeFromMask();let e=(this.overflowScrollRange-t)/this.overflowScrollRange;return e<0&&(e=0),e}getLeaveRangeFromMask(){const t=this.scrollBarView.contents.target,e=this.scrollBarView.isHorizontal,i=g.getPosition(t,e),s=this.getClampedPos();return Math.abs(i-s)}getClampedPos(){const t=this.scrollBarView.contents.target,e=this.scrollBarView.isHorizontal;return u.getClampedTargetPosition(t,this.scrollBarView.contents.mask,e)}dispose(){this.stop(),this.disposeTween()}}class h extends s.bkB{constructor(t){super(),this.delta=16,this._isStart=!1,this.wheelHandler=t=>{const e=t.deltaY>0?-this.delta:this.delta;this.scroll(e)},this.scrollBarView=t,this.scrollBarView.contents.target.eventMode="static",this.start()}start(){this._isStart||(this.scrollBarView.contents.target.on("wheel",this.wheelHandler),this._isStart=!0)}stop(){this.scrollBarView.contents.target.off("wheel",this.wheelHandler),this._isStart=!1}scroll(t){const e=this.scrollBarView.contents.target,i=this.scrollBarView.contents.mask,s=this.scrollBarView.isHorizontal,n=g.getPosition(e,s)+t;u.clampTargetPosition(e,i,n,s),this.emit("update_target_position"),this.scrollBarView.scrollBarEventEmitter.emit("stop_inertial_tween")}}class c extends s.bkB{constructor(t,e,i){super(),this.container=i,this.target=t,this.mask=e,c.init(this)}static init(t){null==t.target.hitArea&&console.warn("A hit area has not been set for the scrollbar contents.\nWithout a hit area, drag operations cannot be properly detected.\nTherefore, it is recommended to set a custom hit area for scrollbar contents.\n\nヒットエリアがスクロールバーコンテンツに設定されていません。\nヒットエリアが設定されていないと、ドラッグ中の操作が正常に判定できません。\nそのため、スクロールバーコンテンツにはカスタムヒットエリアを設定するよう推奨します。"),t.target.mask!==t.mask&&(t.target.mask=t.mask);const e=e=>{e.parent!==t.container&&(e.parent?.removeChild(e),t.container.addChild(e))};e(t.target),e(t.mask)}getScrollPositionAsRate(t){const e=g.getPosition;return(e(this.mask,t)-e(this.target,t))/this.getMovableRange(t)*o.MAX_RATE}getMovableRange(t){const e=g.getSize,i=e(this.target,t)-e(this.mask,t);return i<=0?1e-128:i}scroll(t,e){const i=(0,g.getPosition)(this.mask,e)-this.getMovableRange(e)*(t/o.MAX_RATE);g.setPosition(this.target,e,i)}getDisplayRate(t){const e=g.getSize,i=e(this.target,t),s=e(this.mask,t);return g.clamp(s/i,o.MAX_RATE,0)}dispose(){this.removeAllListeners()}}class d extends o{get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t,this.updateSliderVisible()}constructor(t,e){super(t),this._autoHide=!1,this.scrollBarEventEmitter=new s.bkB,this.updateContentsPosition=t=>{this.updateContentsPositionWithRate(t.rate)},this.contents=e,this.contents.on("changed_contents_size",this.updateSlider),this.sliderEventEmitter.on("slider_change",this.updateContentsPosition),this.changeRate(this.rate),this.wheelManager=new h(this),this.wheelManager.on("update_target_position",()=>{this.updateSliderPosition()}),this.inertialManager=new l(this),this.inertialManager.on("update_target_position",()=>{this.updateSliderPosition()})}limitSliderButtonPosition(t){const e=g.getPointerLocalPosition(this,this.isHorizontal,this.dragStartPos,t),i=this.getRangeOfSliderButtonPosition();return g.clamp(e,i.max,i.min)}convertRateToPixel(t){const e=this.getRangeOfSliderButtonPosition();return g.convertRateToPixel(t,e.max,e.min)}convertPixelToRate(t){const e=this.getRangeOfSliderButtonPosition();return g.convertPixelToRate(t,e.max,e.min)}getRangeOfSliderButtonPosition(){const t=this.slideButtonSize,e=u.getRatioOfOrigin(this._slideButton,this.isHorizontal);return{max:this._maxPosition-(1+e)*t,min:this._minPosition-e*t}}get slideButtonSize(){return this.updateSliderSize(),g.getSize(this._slideButton,this.isHorizontal)}updateSlider(){this.isUpdatableSliderSize()&&(this.updateSliderSize(),this.updateSliderPosition())}updateSliderPosition(){const t=this.contents.getScrollPositionAsRate(this.isHorizontal);this.changeRate(t)}isUpdatableSliderSize(){return null!=this.contents?.target&&null!=this.contents?.mask&&null!=this._slideButton}updateSliderSize(){if(!this.isUpdatableSliderSize())return;const t=(this._maxPosition-this._minPosition)*this.contents.getDisplayRate(this.isHorizontal);g.setSize(this._slideButton,this.isHorizontal,t),this.updateSliderVisible()}updateSliderVisible(){this._slideButton.visible=!this.isHidden,this._slideButton.eventMode=this.isHidden?"none":"static"}get isHidden(){return!!this.autoHide&&1===this.contents.getDisplayRate(this.isHorizontal)}updateContentsPositionWithRate(t){this.contents.scroll(t,this.isHorizontal)}onPressedSliderButton(t){super.onPressedSliderButton(t),this.scrollBarEventEmitter.emit("stop_inertial_tween")}onMoveSlider(t){super.onMoveSlider(t),this.scrollBarEventEmitter.emit("stop_inertial_tween")}onPressBase(t){this.isHidden||(super.onPressBase(t),this.scrollBarEventEmitter.emit("stop_inertial_tween"))}refreshAfterContentsResize(){const t=this.contents.target.y;this.updateSlider(),u.clampTargetPosition(this.contents.target,this.contents.mask,t,this.isHorizontal),this.updateSliderPosition()}onDisposeFunction(){this.contents.dispose(),this.inertialManager.dispose(),super.onDisposeFunction()}}class u{static getClampedTargetPosition(t,e,i){const s=g.getSize,n=s(t,i),o=s(e,i),r=Math.min(-n+o,0),a=g.getPosition(t,i);return g.clamp(a,0,r)}static clampTargetPosition(t,e,i,s){g.setPosition(t,s,i);const n=this.getClampedTargetPosition(t,e,s);g.setPosition(t,s,n)}static getRatioOfOrigin(t,e){const i=g.getContentsBounds(t),s=e?i.width:i.height,n=(e?i.x:i.y)/s;return n>0&&console.warn(`${t.label} : ボタンサイズが不適切です。ボタンの矩形内に原点が収まっていません。スクロールバーボタンは原点を囲む矩形としてください。`),n}}class g{static convertPixelToRate(t,e,i){if(e<=i)return 0;const s=(t-i)/(e-i)*o.MAX_RATE;return g.clamp(s,o.MAX_RATE,0)}static convertRateToPixel(t,e,i){const s=(e-i)*t/o.MAX_RATE+i;return g.clamp(s,e,i)}static getPosition(t,e){return e?t.x:t.y}static getPointerEventPosition(t,e){return t instanceof s.AjL?g.getPosition(t.global,e):g.getPosition(new s.bRX(t.offsetX,t.offsetY),e)}static setPosition(t,e,i){t&&(e?t.x=i:t.y=i)}static getSize(t,e){const i=g.getContentsBounds(t);return e?i.width*t.scale.x:i.height*t.scale.y}static setSize(t,e,i){const s=g.getContentsBounds(t);e?t.scale.x=i/s.width:t.scale.y=i/s.height}static clamp(t,e,i){return t=Math.max(t,i),Math.min(t,e)}static getContentsBounds(t){return t.boundsArea?t.boundsArea:t.hitArea?t.hitArea:t.getLocalBounds()}static getRootContainer(t,e){if(t)return t;let i=e.parent??e;for(;i.parent;)i=i.parent;return i}static addChildParts(t,e){e&&(e.parent?.removeChild(e),t.addChild(e))}static getPointerLocalPoint(t,e){return t instanceof s.AjL?e.toLocal(t.global):e.toLocal(new s.bRX(t.offsetX,t.offsetY))}static getPointerLocalPosition(t,e,i,s){const n=this.getPointerLocalPoint(s,t);return e?n.x-i.x:n.y-i.y}static toggleEventListener(t,e,i,s){e instanceof HTMLCanvasElement?e[t?"addEventListener":"removeEventListener"](i,s):e[t?"on":"off"](i,s)}static addEventListenerToTarget(t,e,i){this.toggleEventListener(!0,t,e,i)}static removeEventListenerFromTarget(t,e,i){this.toggleEventListener(!1,t,e,i)}}s.mcf;const p=async()=>{const t=new s.lgM;await t.init({width:800,height:800}),document.body.appendChild(t.canvas),m(t.stage,t.canvas)},m=(t,e)=>{const i=new s.mcf;t.addChild(i),i.x=32,i.y=120;const n=_(160,360,i),o=new d({base:v(360,16,255),button:P(16,16776960),minPosition:0,maxPosition:360,rate:35,isHorizontal:!0,canvas:e},n);return t.addChild(o),o.x=i.x,o.y=280,n.target.mask=null,o},v=(t,e,i)=>{const n=(new s.A1g).rect(0,0,t,e).fill(i);return n.hitArea=new s.M_G(0,0,t,e),n},P=(t,e)=>{const i=(new s.A1g).rect(.5*-t,-t/2,t,t).fill(e);return i.hitArea=new s.M_G(.5*-t,-t/2,t,t),i.y=t/2,i},w=(t,e,i,n,o=1)=>{const r=(new s.A1g).rect(0,0,e,i).fill({color:t,alpha:o});return r.hitArea=new s.M_G(0,0,e,i),n.addChild(r),r},_=(t,e,i)=>{const s=w(16711935,2*e,t,i),n=w(255,e,t,i,.3);return new c(s,n,i)};"loading"!==document.readyState?p():document.addEventListener("DOMContentLoaded",p)}},n={};function o(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return s[t](i,i.exports,o),i.exports}o.m=s,t=[],o.O=(e,i,s,n)=>{if(!i){var r=1/0;for(c=0;c<t.length;c++){for(var[i,s,n]=t[c],a=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(o.O).every(t=>o.O[t](i[l]))?i.splice(l--,1):(a=!1,n<r&&(r=n));if(a){t.splice(c--,1);var h=s();void 0!==h&&(e=h)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,s,n]},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce((e,i)=>(o.f[i](t,e),e),[])),o.u=t=>t+".js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},i="@masatomakino/pixijs-basic-scrollbar:",o.l=(t,s,n,r)=>{if(e[t])e[t].push(s);else{var a,l;if(void 0!==n)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var d=h[c];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==i+n){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",i+n),a.src=t),e[t]=[s];var u=(i,s)=>{a.onerror=a.onload=null,clearTimeout(g);var n=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach(t=>t(s)),i)return i(s)},g=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.j=964,(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=i[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={964:0};o.f.j=(e,i)=>{var s=o.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise((i,n)=>s=t[e]=[i,n]);i.push(s[2]=n);var r=o.p+o.u(e),a=new Error;o.l(r,i=>{if(o.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",a.name="ChunkLoadError",a.type=n,a.request=r,s[1](a)}},"chunk-"+e,e)}},o.O.j=e=>0===t[e];var e=(e,i)=>{var s,n,[r,a,l]=i,h=0;if(r.some(e=>0!==t[e])){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var c=l(o)}for(e&&e(i);h<r.length;h++)n=r[h],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(c)},i=self.webpackChunk_masatomakino_pixijs_basic_scrollbar=self.webpackChunk_masatomakino_pixijs_basic_scrollbar||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var r=o.O(void 0,[121],()=>o(4233));r=o.O(r)})();