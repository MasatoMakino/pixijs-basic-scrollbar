(()=>{"use strict";var t,e={317:(t,e,i)=>{var s={};i.r(s),i.d(s,{ky:()=>v,Bm:()=>n});var n,o=i(348);class r{constructor(t){this.rate=t}}!function(t){t.CHANGE="event_slider_change",t.CHANGE_FINISH="event_slider_change_finish"}(n||(n={}));class a extends o.W20{constructor(t){super(),this._isHorizontal=!0,this.dragStartPos=new o.E9j,this.isDragging=!1,this.startMove=t=>{this.onPressedSliderButton(t)},this.moveSlider=t=>{this.onMoveSlider(t)},this.moveSliderFinish=t=>{this.isDragging=!1,this._slideButton.off("pointermove",this.moveSlider),this._slideButton.off("pointerup",this.moveSliderFinish),this._slideButton.off("pointerupoutside",this.moveSliderFinish),this.emit(n.CHANGE_FINISH,new r(this.rate))},this.dispose=t=>{this.onDisposeFunction(t)},this.init(t),this.interactive=!0}get isHorizontal(){return this._isHorizontal}init(t){t=class{static init(t){var e,i,s;return null!=t.rate&&(t.rate=Math.max(0,t.rate),t.rate=Math.min(a.MAX_RATE,t.rate)),null!==(e=t.minPosition)&&void 0!==e||(t.minPosition=0),null!==(i=t.rate)&&void 0!==i||(t.rate=0),null!==(s=t.isHorizontal)&&void 0!==s||(t.isHorizontal=!0),this.check(t),t}static check(t){this.checkParts(t.base,"base"),this.checkParts(t.button,"button"),this.checkParts(t.mask,"mask"),this.checkParts(t.bar,"bar")}static checkParts(t,e){if(null==t)return;const i=h.getContentsBounds(t);if(0===i.width&&0===i.height&&i.type===o.HSM.RECT)throw new Error(`SliderView : ${e} 初期化オプションで指定されたDisplayObjectにバウンディングボックスが存在しません。Containerを利用する場合はhitAreaを利用してバウンディングボックスを手動で設定してください。`);t.parent&&console.warn("初期化オプションで指定されたパーツがすでに別の親にaddChildされています。SliderViewおよびScrollBarViewの構成パーツは同一のコンテナにaddChildされることを前提としています。")}}.init(t),this.base=t.base,this._bar=this.initBarAndMask(t.bar),this.slideButton=t.button,this._barMask=this.initBarAndMask(t.mask),this._bar&&this._barMask&&(this._bar.mask=this._barMask),this._minPosition=t.minPosition,this._maxPosition=t.maxPosition,this._isHorizontal=t.isHorizontal,this._rate=t.rate,this.changeRate(this._rate)}addChildParts(t){var e;t&&(null===(e=t.parent)||void 0===e||e.removeChild(t),this.addChild(t))}changeRate(t){if(this.isDragging)return;this._rate=t;const e=this.convertRateToPixel(this._rate);this.updateParts(e),this.emit(n.CHANGE,new r(this.rate))}onPressedSliderButton(t){this.isDragging=!0;const e=t.currentTarget,i=this.toLocal(t.data.global);this.dragStartPos=new o.E9j(i.x-e.x,i.y-e.y),this._slideButton.on("pointermove",this.moveSlider),this._slideButton.on("pointerup",this.moveSliderFinish),this._slideButton.on("pointerupoutside",this.moveSliderFinish)}onMoveSlider(t){const e=t,i=this.limitSliderButtonPosition(e);this.updateParts(i),this._rate=this.convertPixelToRate(i),this.emit(n.CHANGE,new r(this.rate))}limitSliderButtonPosition(t){const e=this.getMousePosition(this,t);return h.clamp(e,this._maxPosition,this._minPosition)}updateParts(t){const e=e=>{h.setSize(e,this._isHorizontal,t-h.getPosition(e,this._isHorizontal))};this._bar&&!this._barMask&&e(this._bar),this._barMask&&e(this._barMask),h.setPosition(this._slideButton,this._isHorizontal,t)}onPressBase(t){this.dragStartPos=new o.E9j,this.moveSlider(t),this.emit(n.CHANGE_FINISH,new r(this.rate))}convertRateToPixel(t){return h.convertRateToPixel(t,this._maxPosition,this._minPosition)}convertPixelToRate(t){return h.convertPixelToRate(t,this._maxPosition,this._minPosition)}getMousePosition(t,e){const i=t.toLocal(e.data.global);return this._isHorizontal?i.x-this.dragStartPos.x:i.y-this.dragStartPos.y}set base(t){this._base=t,this._base.interactive=!0,this._base.on("pointertap",(t=>{this.onPressBase(t)})),this.addChildParts(t)}initBarAndMask(t){if(null!=t)return t.interactive=!1,this.addChildParts(t),t}set slideButton(t){this._slideButton=t,this._slideButton.on("pointerdown",this.startMove),this._slideButton.interactive=!0,this.addChildParts(t)}get rate(){return this._rate}onDisposeFunction(t){this.removeAllListeners(),this._base.removeAllListeners(),this._slideButton.removeAllListeners(),this.removeChildren()}}a.MAX_RATE=1;class h{static convertPixelToRate(t,e,i){if(e<=i)return 0;const s=(t-i)/(e-i)*a.MAX_RATE;return h.clamp(s,a.MAX_RATE,0)}static convertRateToPixel(t,e,i){const s=(e-i)*t/a.MAX_RATE+i;return h.clamp(s,e,i)}static getPosition(t,e){return e?t.x:t.y}static setPosition(t,e,i){t&&(e?t.x=i:t.y=i)}static getSize(t,e){const i=h.getContentsBounds(t);return e?i.width*t.scale.x:i.height*t.scale.y}static setSize(t,e,i){const s=h.getContentsBounds(t);e?t.scale.x=i/s.width:t.scale.y=i/s.height}static clamp(t,e,i){return t=Math.max(t,i),Math.min(t,e)}static getContentsBounds(t){return t.hitArea?t.hitArea:t.getLocalBounds()}}var l,d,c,u=i(471);!function(t){t.UPDATE_TARGET_POSITION="ScrollBarEventType_UPDATE_TARGET_POSITION",t.STOP_INERTIAL_TWEEN="ScrollBarEventType_STOP_INERTIAL_TWEEN"}(l||(l={}));class g{static getClampedTargetPosition(t,e,i){const s=h.getSize,n=s(t,i),o=s(e,i),r=Math.min(-n+o,0),a=h.getPosition(t,i);return h.clamp(a,0,r)}static clampTargetPosition(t,e,i,s){h.setPosition(t,s,i);const n=this.getClampedTargetPosition(t,e,s);h.setPosition(t,s,n)}static getRatioOfOrigin(t,e){const i=h.getContentsBounds(t),s=e?i.width:i.height,n=(e?i.x:i.y)/s;return n>0&&console.warn(`${t.name} : ボタンサイズが不適切です。ボタンの矩形内に原点が収まっていません。スクロールバーボタンは原点を囲む矩形としてください。`),n}}class p extends o.P6Y.vp{constructor(t){super(),this.decelerationRate=.975,this.overflowScrollRange=180,this._speed=0,this.isDragging=!1,this.onMouseDown=t=>{this.updateDragPos(t),this.isDragging=!0,this._speed=0,this.tween&&this.disposeTween(),this.addDragListener()},this.onMouseMove=t=>{const e=this.getDragPos(t)-this.dragPos;this._speed=e,this.addTargetPosition(e*this.getOverflowDeceleration()),this.updateDragPos(t)},this.onMouseUp=t=>{this.removeDragListener(),this.isDragging=!1,this.onTick()},this.onTick=()=>{var t;if(this.isDragging)return;if(0===this._speed&&0===this.getLeaveRangeFromMask())return;if(null===(t=this.tween)||void 0===t?void 0:t.isPlaying())return;const e=this.getOverflowDeceleration();if(this._speed*=this.decelerationRate*e,this.addTargetPosition(this._speed),Math.abs(this._speed)>.1)return;this._speed=0;const i={y:this.getClampedPos()};this.disposeTween(),this.tween=new u.kX(this.scrollBarView.contents.target).to(i,666).onUpdate((()=>{this.emit(l.UPDATE_TARGET_POSITION)})).easing(u.oY.Cubic.Out).start()},this.stopInertial=()=>{this._speed=0,this.disposeTween()},this.disposeTween=()=>{this.tween&&(this.tween.stop(),this.tween=null)},this.scrollBarView=t,t.on(l.STOP_INERTIAL_TWEEN,this.stopInertial),this.scrollBarView.contents.target.interactive=!0,this.start()}get speed(){return this._speed}start(){this._isStart||(this._isStart=!0,this.scrollBarView.contents.target.on("pointerdown",this.onMouseDown),o.vB5.shared.add(this.onTick))}stop(){this._isStart&&(this._isStart=!1,this.scrollBarView.contents.target.off("pointerdown",this.onMouseDown),this.removeDragListener(),this.stopInertial(),o.vB5.shared.remove(this.onTick))}addDragListener(){this.switchDragListener(!0)}removeDragListener(){this.switchDragListener(!1)}switchDragListener(t){const e=this.scrollBarView.contents.target,i=(t,i,s)=>{t?e.on(i,s):e.off(i,s)};i(t,"pointermove",this.onMouseMove),i(t,"pointerup",this.onMouseUp),i(t,"pointerupoutside",this.onMouseUp)}getDragPos(t){return h.getPosition(t.data.global,this.scrollBarView.isHorizontal)}updateDragPos(t){this.dragPos=this.getDragPos(t)}addTargetPosition(t){const e=this.scrollBarView.contents.target,i=this.scrollBarView.isHorizontal,s=h.getPosition(e,i);h.setPosition(e,i,s+t),this.emit(l.UPDATE_TARGET_POSITION)}getOverflowDeceleration(){const t=this.getLeaveRangeFromMask();let e=(this.overflowScrollRange-t)/this.overflowScrollRange;return e<0&&(e=0),e}getLeaveRangeFromMask(){const t=this.scrollBarView.contents.target,e=this.scrollBarView.isHorizontal,i=h.getPosition(t,e),s=this.getClampedPos();return Math.abs(i-s)}getClampedPos(){const t=this.scrollBarView.contents.target,e=this.scrollBarView.isHorizontal;return g.getClampedTargetPosition(t,this.scrollBarView.contents.mask,e)}}!function(t){t.WHEEL="wheel"}(d||(d={}));class _{constructor(t){this.eventHandler=t=>{this.onMouseWheel(t)},this.app=t,this.app.view.addEventListener("wheel",this.eventHandler,{passive:!1})}onMouseWheel(t){const e=this.findScrollTarget({x:t.offsetX,y:t.offsetY});e&&(t.preventDefault(),e.emit(d.WHEEL,t))}findScrollTarget(t){const e=this.app.renderer.plugins.interaction.hitTest(t);if(e&&e.interactiveMousewheel)return e}destroy(){this.app.view.removeEventListener("wheel",this.eventHandler)}}class P extends o.P6Y.vp{constructor(t){super(),this.delta=16,this.wheelHandler=t=>{const e=t.deltaY>0?-this.delta:this.delta;this.scroll(e)},this.scrollBarView=t;const e=this.scrollBarView.contents.target;e.interactive=!0,e.interactiveMousewheel=!0,this.start()}start(){this._isStart||(this.scrollBarView.contents.target.on(d.WHEEL,this.wheelHandler),this._isStart=!0)}stop(){this.scrollBarView.contents.target.off(d.WHEEL,this.wheelHandler),this._isStart=!1}scroll(t){const e=this.scrollBarView.contents.target,i=this.scrollBarView.contents.mask,s=this.scrollBarView.isHorizontal,n=h.getPosition(e,s)+t;g.clampTargetPosition(e,i,n,s),this.emit(l.UPDATE_TARGET_POSITION),this.scrollBarView.emit(l.STOP_INERTIAL_TWEEN)}}!function(t){t.CHANGED_CONTENTS_SIZE="ScrollBarContentsEventType_CHANGED_CONTENTS_SIZE"}(c||(c={}));class v extends a{constructor(t,e){super(t),this._autoHide=!1,this.updateContentsPosition=t=>{const e=t;this.updateContentsPositionWithRate(e.rate)},this._contents=e,this._contents.on(c.CHANGED_CONTENTS_SIZE,this.updateSlider),this.on(n.CHANGE,this.updateContentsPosition),this.changeRate(t.rate),this.wheelManager=new P(this),this.wheelManager.on(l.UPDATE_TARGET_POSITION,(()=>{this.updateSliderPosition()})),this.inertialManager=new p(this),this.inertialManager.on(l.UPDATE_TARGET_POSITION,(()=>{this.updateSliderPosition()}))}get contents(){return this._contents}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=t,this.updateSliderVisible()}limitSliderButtonPosition(t){const e=this.getMousePosition(this,t),i=this.getRangeOfSliderButtonPosition();return h.clamp(e,i.max,i.min)}convertRateToPixel(t){const e=this.getRangeOfSliderButtonPosition();return h.convertRateToPixel(t,e.max,e.min)}convertPixelToRate(t){const e=this.getRangeOfSliderButtonPosition();return h.convertPixelToRate(t,e.max,e.min)}getRangeOfSliderButtonPosition(){const t=this.slideButtonSize,e=g.getRatioOfOrigin(this._slideButton,this.isHorizontal);return{max:this._maxPosition-(1+e)*t,min:this._minPosition-e*t}}get slideButtonSize(){return this.updateSliderSize(),h.getSize(this._slideButton,this.isHorizontal)}updateSlider(){this.isUpdatableSliderSize()&&(this.updateSliderSize(),this.updateSliderPosition())}updateSliderPosition(){const t=this.contents.getScrollPositionAsRate(this.isHorizontal);this.changeRate(t)}isUpdatableSliderSize(){var t,e;return null!=(null===(t=this._contents)||void 0===t?void 0:t.target)&&null!=(null===(e=this._contents)||void 0===e?void 0:e.mask)&&null!=this._slideButton}updateSliderSize(){if(!this.isUpdatableSliderSize())return;const t=(this._maxPosition-this._minPosition)*this._contents.getDisplayRate(this.isHorizontal);h.setSize(this._slideButton,this.isHorizontal,t),this.updateSliderVisible()}updateSliderVisible(){this._slideButton.visible=this._slideButton.interactive=!this.isHidden}get isHidden(){return!!this.autoHide&&1===this._contents.getDisplayRate(this.isHorizontal)}updateContentsPositionWithRate(t){this._contents.scroll(t,this.isHorizontal)}onPressedSliderButton(t){super.onPressedSliderButton(t),this.emit(l.STOP_INERTIAL_TWEEN)}onMoveSlider(t){super.onMoveSlider(t),this.emit(l.STOP_INERTIAL_TWEEN)}onPressBase(t){this.isHidden||(super.onPressBase(t),this.emit(l.STOP_INERTIAL_TWEEN))}onDisposeFunction(t){this._contents.dispose(),this._contents=null,super.onDisposeFunction(t)}}Object.defineProperty(o.s$$.prototype,"interactiveMousewheel",{get:function(){return this._interactiveMousewheel},set:function(t){this._interactiveMousewheel=t,t&&!this.interactive&&(this.interactive=!0)}}),o.MxU.registerPlugin({init:function(t){this._mousewheelPlugin=new _(this)},destroy:function(){this._mousewheelPlugin.destroy()}});const m=()=>{const t=new o.MxU({width:800,height:800});document.body.appendChild(t.view),o.vB5.shared.add((t=>{u.ZP.update(performance.now())}));const e=w(t.stage),i=t=>{const e=document.createElement("button");return e.innerText=t,document.body.appendChild(e),e},s=i("Contents Size +"),n=i("Contents Size -"),r=t=>{const i=e.rate;E(e.contents.target,t),e.updateSlider(),e.changeRate(i)};s.addEventListener("click",(()=>{r(64)})),n.addEventListener("click",(()=>{r(-64)}))},w=t=>{const e=new o.W20;t.addChild(e),e.x=32,e.y=120;const i=B(240,360,e),s=new v({base:S(16,360,255),button:T(16,16776960),minPosition:0,maxPosition:360,rate:35,isHorizontal:!1},i);return t.addChild(s),s.x=e.x+240,s.y=120,s.on(n.CHANGE,(t=>{})),i.target.mask=null,s},S=(t,e,i)=>{const s=new o.TCu;return s.beginFill(i),s.drawRect(0,0,t,e),s.hitArea=new o.AeJ(0,0,t,e),s},T=(t,e)=>{const i=new o.TCu;return i.beginFill(e),i.drawRect(-t/2,.5*-t,t,t),i.hitArea=new o.AeJ(-t/2,.5*-t,t,t),i.x=t/2,i},f=(t,e,i,s,n=1)=>{const r=new o.TCu;return r.beginFill(t,n),r.drawRect(0,0,e,i),r.hitArea=new o.AeJ(0,0,e,i),s.addChild(r),r},E=(t,e)=>{const i=t.fill.clone();console.log(i);const s=t.hitArea.clone();s.height+=e,t.clear(),t.beginFill(i.color,i.alpha),t.drawRect(s.x,s.y,s.width,s.height),t.hitArea=new o.AeJ(s.x,s.y,s.width,s.height)},B=(t,e,i)=>{const n=f(16711935,t,2*e,i),o=f(255,t,e,i,.3);return new s.ScrollBarContents(n,o,i)};"loading"!==document.readyState?m():document.addEventListener("DOMContentLoaded",m)}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,t=[],s.O=(e,i,n,o)=>{if(!i){var r=1/0;for(d=0;d<t.length;d++){for(var[i,n,o]=t[d],a=!0,h=0;h<i.length;h++)(!1&o||r>=o)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(a=!1,o<r&&(r=o));if(a){t.splice(d--,1);var l=n();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,n,o]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s.j=545,(()=>{var t={545:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var n,o,[r,a,h]=i,l=0;if(r.some((e=>0!==t[e]))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(h)var d=h(s)}for(e&&e(i);l<r.length;l++)o=r[l],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},i=self.webpackChunk_masatomakino_pixijs_basic_scrollbar=self.webpackChunk_masatomakino_pixijs_basic_scrollbar||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var n=s.O(void 0,[736],(()=>s(317)));n=s.O(n)})();